<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Showcode</title>

  <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
  <link rel="manifest" href="assets/site.webmanifest">

  <script>
    window.showToast = (message, type="info", duration = 3000) => {
      let container = document.getElementById('toast-container');
      if (!container) {
        container = document.createElement('div');
        container.id = 'toast-container';
        document.body.appendChild(container);
      }
      const toast = document.createElement('div');
      toast.className = 'toast-notification';
			toast.classList.add(type);

      toast.innerHTML = `<span>${message}</span>`;
      container.appendChild(toast);
      requestAnimationFrame(() => {
        toast.classList.add('show');
      });
      setTimeout(() => {
        toast.classList.remove('show');
        toast.addEventListener('transitionend', () => {
          toast.remove();
          if (container.children.length === 0) {
            container.remove();
          }
        });
      }, duration);
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <link rel="stylesheet" type='text/css' href="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/devicon.min.css" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap"
    rel="stylesheet">

  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/overview.css">
  <link rel="stylesheet" href="styles/flow.css">
  <link rel="stylesheet" href="styles/alignment.css">
	<link rel="stylesheet" href="styles/editor.css">
	<link rel="stylesheet" href="styles/settings.css">

  <script>
    const renderer = new marked.Renderer();
    const linkRenderer = renderer.link;
    renderer.link = (href, title, text) => {
      const html = linkRenderer.call(renderer, href, title, text);
      return html.replace(/^<a /, '<a target="_blank" rel="nofollow" ');
    };

    window.markedRenderer = renderer;
  </script>
</head>

<body>

  <div id="hover-tooltip">
    Lorem ipsum dolor, sit amet consectetur adipisicing elit. Exercitationem, porro?
  </div>

	<button class="settings-btn" data-tab="settings">
		<svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
		  <circle cx="12" cy="12" r="3"></circle>
		  <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z"></path>
		</svg>
	</button>

  <div id="app">
    <div id="header-container"></div>
    <div class="tabs-container">
      <button class="tab-btn active" data-tab="overview">Overview</button>
      <button class="tab-btn" data-tab="flow">Flow</button>
      <button class="tab-btn" data-tab="alignment">Alignment</button>	
    </div>

    <div id="overview-view" class="view-section active">
    </div>

    <div id="settings-view" class="view-section">
    </div>

    <div id="flow-view" class="view-section">
      <div id="flowCanvas">
        <div class="flow-controls">
          <button class="btn-action" id="btn-save-flow">Save Layout</button>
          <button class="btn-action" id="btn-export-flow">Export Layout</button>
        </div>
        <svg class="connections-layer" id="svgLayer"></svg>
        <div id="nodesContainer"></div>
      </div>
    </div>

    <div id="alignment-view" class="view-section">
    </div>
  </div>

  <div id="codeModal" class="modal-overlay">
    <div class="modal-card">
      <div class="modal-header">
        <span class="modal-title" id="modalTitle">Snippet View</span>
        <button class="close-btn" id="modalCloseBtn">&times;</button>
      </div>
      <div class="modal-body" id="modalBody">
      </div>
    </div>
  </div>

  <div id="exportModal" class="modal-overlay">
    <div class="modal-card" style="max-width: 90vw; width: auto;">
      <div class="modal-header">
        <span class="modal-title">Export Preview</span>
        <button class="close-btn" id="exportModalCloseBtn">&times;</button>
      </div>
      <div class="modal-body" style="padding: 20px; display: flex; flex-direction: column; align-items: center; gap: 20px;">
        <div id="exportPreviewContainer" style="overflow: auto; max-height: 60vh; border: 1px solid var(--border); border-radius: 8px;">
            </div>
        <a id="downloadPngLink" class="btn-action" style="background: var(--primary); color: white; text-decoration: none; padding: 10px 20px;">Download PNG</a>
      </div>
    </div>
  </div>

  <script type="module" src="js/main.js"></script>
</body>

</html>
